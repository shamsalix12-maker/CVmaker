# گزارش عملکرد ماژول CV Manager
# Performance Report: CV Manager Module

این گزارش شامل تحلیل فنی فرآیند استخراج، شناسایی گپ‌ها (Gaps) و مدیریت اصلاح رزومه است.

---

## ۱. معماری استخراج (Extraction Architecture)

ماژول استخراج از یک سیستم **Domain-Aware** و **Multi-Stage** برای دقت حداکثری استفاده می‌کند.

- **Multi-Stage Extraction**: برای جلوگیری از مشکلاتی مانند Truncation (قطع شدن پاسخ AI) و Data Loss، فرآیند استخراج به مراحل زیر تقسیم شده است:
    1.  **Personal Info**: استخراج اطلاعات تماس و خلاصه حرفه‌ای.
    2.  **Work Experience**: استخراج تمام سوابق کاری به صورت کامل.
    3.  **Education & Skills**: استخراج سوابق تحصیلی، مهارت‌ها و پروژه‌ها.
    4.  **Gap Analysis**: تحلیل نهایی و شناسایی نقاط ضعف.
- **Domain-Awareness**: پرامپت‌ها بر اساس حوزه‌های انتخابی کاربر (مانند Software Engineering, Academic, etc) شخصی‌سازی می‌شوند تا کلمات کلیدی و بخش‌های اختصاصی هر حوزه شناسایی شوند.

---

## ۲. شناسایی گپ‌ها و نواقص (Gap Detection Logic)

سیستم به سه لایه برای پیدا کردن گپ‌ها مجهز است:

### الف) تحلیل مبتنی بر هوش مصنوعی (AI-Driven)
در هر مرحله از استخراج، AI موظف است موارد زیر را بررسی کند:
- بخش‌های مفقوده (Missing Sections)
- توضیحات ضعیف یا خیلی کوتاه (Weak Descriptions)
- نبود معیارهای قابل اندازه‌گیری (Missing Metrics/Numbers)

### ب) قوانین Fallback (Rule-Based)
در صورتی که هوش مصنوعی موفق به شناسایی گپ‌ها نشود، تابع `generateBasicGaps` در فایل `cv-extractor.ts` وارد عمل شده و فیلدهای حیاتی (تلفن، لینکدین، خلاصه) را چک می‌کند.

### ج) ارزیابی کیفیت (Quality Assessment)
توابع موجود در `cv-validator.ts` محتوا را از نظر طول، ساختار و محتوا رتبه‌بندی می‌کنند (`weak` تا `excellent`).

---

## ۳. مدیریت و رفع گپ‌ها (Gap Management & Refinement)

فرآیند اصلاح رزومه (Refinement) با دقت بسیار بالا طراحی شده است تا تجربه کاربر تضمین شود:

- **Safe Refine Logic**: تابع `safeRefineCV` در فایل `multi-stage-extractor.ts` تضمین می‌کند که در هنگام ادغام اطلاعات جدید، داده‌های قبلی هرگز پاک نشوند (Merge-Only approach).
- **Interactive Refinement**: کاربر می‌تواند به صورت مستقیم به هر گپ پاسخ دهد و AI آن را در بخش صحیح رزومه جایگذاری می‌کند.
- **Multi-Language Support**: سیستم زبان اصلی رزومه را تشخیص داده و ورودی‌های کاربر را در صورت نیاز ترجمه می‌کند تا یکپارچگی زبان حفظ شود.

---

## ۴. بهینه‌سازهای فنی (Technical Optimizations)

- **JSON Repair System**: سیستمی برای ترمیم خودکار کدهای JSON ناقص که ممکن است توسط مدل‌های ضعیف‌تر تولید شوند.
- **Smart Retries**: تکرار هوشمند مراحل استخراج در صورت شکست اعتبارسنجی اولیه.
- **Detailed Validation**: بازگشت درصد تکمیل (Completion Percentage) بر اساس حوزه‌های مختلف.

---
> [!NOTE]
> این ماژول در حال حاضر بر روی پایداری داده‌ها (Data Integrity) تمرکز دارد تا کاربر پس از آپلود رزومه، هیچ بخشی از محتوای خود را از دست ندهد.
