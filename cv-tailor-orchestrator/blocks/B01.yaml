id: B01
name: "Create Empty Next.js Project"
phase: 0
phase_name: "Foundation"

goal: |
  Create a clean, running Next.js 14+ project with TypeScript and Tailwind CSS.
  This is the foundation of the entire application.

dependencies: []

files_to_create:
  - id: F001
    path: "package.json"
  - id: F002
    path: "tsconfig.json"
  - id: F003
    path: "next.config.ts"
  - id: F004
    path: "tailwind.config.ts"
  - id: F005
    path: ".env.local"
  - id: F006
    path: ".env.example"
  - id: F007
    path: "src/app/layout.tsx"
  - id: F008
    path: "src/app/page.tsx"
  - id: F009
    path: "src/app/globals.css"

files_to_modify: []

files_available: []

commands:
  - |
    npx create-next-app@latest cv-tailor-app \
      --typescript \
      --tailwind \
      --eslint \
      --app \
      --src-dir \
      --import-alias "@/*"

instructions: |
  1. Run the create-next-app command with the EXACT flags specified above.
  2. Navigate into the created directory: cd cv-tailor-app
  3. Create .env.local with these empty placeholders:
     ```
     NEXT_PUBLIC_SUPABASE_URL=
     NEXT_PUBLIC_SUPABASE_ANON_KEY=
     ENCRYPTION_SECRET_KEY=
     ```
  4. Create .env.example with the same keys (for documentation):
     ```
     NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
     NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
     ENCRYPTION_SECRET_KEY=your_32_character_secret_key
     ```
  5. Verify the dev server runs: npm run dev
  6. Do NOT add any extra files or modify the default setup yet.

checkpoint_tests:
  - id: T01
    description: "package.json exists and has Next.js dependency"
    type: "grep"
    file: "package.json"
    patterns:
      - '"next":'
      - '"react":'
      - '"typescript":'

  - id: T02
    description: "TypeScript compiles without errors"
    type: "command"
    command: "npx tsc --noEmit"
    expected_exit_code: 0

  - id: T03
    description: "All required files exist"
    type: "files_exist"
    files:
      - "package.json"
      - "tsconfig.json"
      - "next.config.ts"
      - "tailwind.config.ts"
      - ".env.local"
      - ".env.example"
      - "src/app/layout.tsx"
      - "src/app/page.tsx"
      - "src/app/globals.css"

  - id: T04
    description: "Tailwind is configured"
    type: "grep"
    file: "tailwind.config.ts"
    patterns:
      - "content:"
      - "./src/"

  - id: T05
    description: ".env.local has required placeholders"
    type: "grep"
    file: ".env.local"
    patterns:
      - "NEXT_PUBLIC_SUPABASE_URL"
      - "NEXT_PUBLIC_SUPABASE_ANON_KEY"
      - "ENCRYPTION_SECRET_KEY"

max_retries: 3